<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Phật dạy Con làm theo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" >
    <link rel="stylesheet" href="style.css" >

    <link rel="stylesheet" href="/widgets/styleTT.css">
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
         <div style="display: flex; gap: 10px; flex-wrap: wrap;">
    <button onclick="toggleRead()">
      <span id="button-text">📖 ĐỌC NỘI DUNG TRANG</span>
      <span id="arrow-icon" class="arrow">⬇️</span>
    </button>
    <button id="ttsBtn" onclick="toggleTTS()">🔊 PHÁT GIỌNG ĐỌC</button>
  </div>

  <div id="output"></div>

  <script>
    let isLoaded = false;
    let isSpeaking = false;
    let utterance;

    function toggleRead() {
      const output = document.getElementById("output");
      const btnText = document.getElementById("button-text");
      const arrow = document.getElementById("arrow-icon");

      if (!isLoaded) {
        const elements = Array.from(document.querySelectorAll("p, h1, h2, h3, li, blockquote"));
        const text = elements.map(el => el.innerText).join("\n\n");
        output.innerText = text;
        isLoaded = true;
      }

      if (output.classList.contains("show")) {
        output.classList.remove("show");
        btnText.innerText = "📖 ĐỌC NỘI DUNG TRANG";
        arrow.classList.remove("rotated");
        arrow.innerText = "⬇️";
        stopTTS(); // dừng giọng đọc nếu đang đọc
      } else {
        output.classList.add("show");
        btnText.innerText = "🔽 ẨN NỘI DUNG TRANG";
        arrow.classList.add("rotated");
        arrow.innerText = "⬆️";
      }
    }

    function toggleTTS() {
      const text = document.getElementById("output").innerText;
      const ttsBtn = document.getElementById("ttsBtn");

      if (!isSpeaking) {
        utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'vi-VN';
        speechSynthesis.speak(utterance);
        isSpeaking = true;
        ttsBtn.innerText = "⏹️ DỪNG GIỌNG ĐỌC";

        utterance.onend = () => {
          isSpeaking = false;
          ttsBtn.innerText = "🔊 PHÁT GIỌNG ĐỌC";
        };
      } else {
        stopTTS();
      }
    }

    function stopTTS() {
      speechSynthesis.cancel();
      isSpeaking = false;
      document.getElementById("ttsBtn").innerText = "🔊 PHÁT GIỌNG ĐỌC";
    }

    function autoSetTheme() {
      const hour = new Date().getHours();
      const body = document.body;
      if (hour >= 18 || hour < 6) {
        body.classList.add("dark");
        body.classList.remove("light");
      } else {
        body.classList.add("light");
        body.classList.remove("dark");
      }
    }

    autoSetTheme();
  </script>
    <nav
    <div class="hero">
      <h1><strong>Phật dạy<br> Con làm theo</strong></h1>
    </div>
    <hr>
      <p class="subtitle">
        <h3><strong>Chia sẻ Phật pháp, Ăn chay, Đạo làm người và Lời hay ý đẹp.</strong></h3></p>
    <div 
      class="circle-menu">
        <a href="gioi-thieu.html" title="Giới Thiệu">📜
        </a>
        <a href="video.html" title="Video">🎥
        </a>
        <a href="bai-viet.html" title="Bài Viết">📖
        </a>
        <a href="https://www.youtube.com/@PhatdayConlamtheo" class="center" title="Đăng Ký Kênh YouTube" target="_self">🔔
        </a>
        <a href="tu-sach.html"title="Tủ Sách">📚
        </a>
        <a href="goc-thien.html" title="Góc Thiền">🧘
        </a>
        <a href="tai-mp3.html" title="Tải MP3">🎧
        </a>
    </div>
    <section class="video-section">
      <h2>🎥 XEM VIDEO MỚI NHẤT</h2>
    <div class="video-row">
    <div class="video-box">


  <h2>🎼 Giao hưởng YouTube - Âm thanh cho tâm hồn</h2>

  <!-- 🎬 Danh sách video (bạn chỉ cần thêm data-video-id là được!) -->
  <div class="video-block" data-player-id="yt1" data-video-id="NpVbP2aMKH4">
    <iframe id="yt1"></iframe>
    <br>
    <button class="mute-toggle">🔇 Tắt tiếng</button>
  </div>

  <div class="video-block" data-player-id="yt2" data-video-id="e3uG3NOH0BU">
    <iframe id="yt2"></iframe>
    <br>
    <button class="mute-toggle">🔇 Tắt tiếng</button>
  </div>

  <div class="video-block" data-player-id="yt3" data-video-id="V-TQ5N9ONdU">
    <iframe id="yt3"></iframe>
    <br>
    <button class="mute-toggle">🔇 Tắt tiếng</button>
  </div>
  
  <div class="video-block" data-player-id="yt4" data-video-id="kz9Dcd5qszY">
    <iframe id="yt4"></iframe>
    <br>
    <button class="mute-toggle">🔇 Tắt tiếng</button>
  </div>

  <!-- ⚙️ Điều chỉnh tốc độ fade -->
  <div class="fade-speed">
    ⏱️ Tốc độ fade âm lượng:
    <input id="fade-speed" type="range" min="100" max="1000" value="200">
    <span id="fade-val">200 ms</span>
  </div>

  <script>
    const players = {};
    let fadeSpeed = 200;

    // Cập nhật slider tốc độ
    const fadeSlider = document.getElementById('fade-speed');
    const fadeVal = document.getElementById('fade-val');
    fadeSlider.addEventListener('input', () => {
      fadeSpeed = parseInt(fadeSlider.value);
      fadeVal.textContent = `${fadeSpeed} ms`;
    });

    // Tải API YouTube
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.body.appendChild(tag);

    // Sau khi API đã sẵn sàng
    function onYouTubeIframeAPIReady() {
      document.querySelectorAll('.video-block').forEach(block => {
        const playerId = block.dataset.playerId;
        const videoId = block.dataset.videoId;
        const iframe = block.querySelector('iframe');
        const button = block.querySelector('.mute-toggle');

        // Gán src cho iframe
        iframe.src = `https://www.youtube.com/embed/${videoId}?enablejsapi=1&autoplay=1&mute=1&loop=1&playlist=${videoId}&controls=0&rel=0&modestbranding=1`;

        // Khởi tạo player
        players[playerId] = new YT.Player(playerId, {
          events: {
            onReady: () => setupPlayerShared(playerId, iframe, button)
          }
        });
      });
    }

    function setupPlayerShared(playerId, iframe, button) {
      const player = players[playerId];
      const key = `muteState_${playerId}`;
      const saved = localStorage.getItem(key);

      if (saved === 'unmuted') {
        player.unMute();
        fadeIn(player);
        iframe.classList.remove('blurred');
        button.textContent = '🔊 Đang phát tiếng';
      } else {
        player.mute();
        iframe.classList.add('blurred');
        button.textContent = '🔇 Tắt tiếng';
      }
      button.addEventListener('click', () => {
        if (player.isMuted()) {
          player.unMute();
          fadeIn(player);
          iframe.classList.remove('blurred');
          button.textContent = '🔊 Đang phát tiếng';
          localStorage.setItem(key, 'unmuted');
        } else {
          fadeOut(player, () => {
            player.mute();
            iframe.classList.add('blurred');
            button.textContent = '🔇 Tắt tiếng';
            localStorage.setItem(key, 'muted');
          });
        }
      });
    }

    function fadeIn(player) {
      let vol = 0;
      player.setVolume(vol);
      const fade = setInterval(() => {
        if (vol < 100) {
          vol += 10;
          player.setVolume(vol);
        } else {
          clearInterval(fade);
        }
      }, fadeSpeed);
    }
>
    
    function fadeOut(player, callback) {
      let vol = player.getVolume();
      const fade = setInterval(() => {
        if (vol > 0) {
          vol -= 10;
          player.setVolume(vol);
        } else {
          clearInterval(fade);
          callback();
        }
      }, fadeSpeed);
    }
  </script>

  <!-- 🎬 Video nền -->
  <div id="video-container">
    <video id="my-video" autoplay loop muted>
      <source src="your-video.mp4" type="video/mp4" />
      Trình duyệt của bạn không hỗ trợ video.
    </video>
    <audio id="bg-music" src="background.mp3" loop></audio>
  </div>

  <!-- 🌤️ Các widget chính -->
  <div id="widgets">
    <div id="weather-widget"></div>
    <div id="clock-widget"></div>
    <div id="news-ticker"></div>
  </div>

  <!-- ⚙️ Nút mở setting -->
  <button id="toggle-settings">⚙️</button>

  <!-- ⚙️ Panel Cài đặt -->
  <div id="settings-panel" class="hidden">
    <label><input type="checkbox" id="toggle-weather" checked> Hiện thời tiết</label><br/>
    <label><input type="checkbox" id="toggle-news" checked> Hiện tin tức</label><br/>
    <label><input type="checkbox" id="toggle-clock" checked> Hiện đồng hồ</label><br/>
    <label><input type="checkbox" id="toggle-music" checked> Bật nhạc nền</label><br/>
    <div>
      <label for="dark-mode-select">🌗 Giao diện:</label>
      <select id="dark-mode-select">
        <option value="auto">Tự động</option>
        <option value="dark">Tối</option>
        <option value="light">Sáng</option>
      </select>
    </div>
  </div>

  <!-- 📜 Scripts -->
  <script src="weather-widget.js"></script>
  <script src="news-ticker.js"></script>
  <script src="clock-widget.js"></script>
  <script src="background-music.js"></script>
  <script src="settings-panel.js"></script>
  <script src="buddha-quotes.js"></script>


    
    class="more-videos">
      <h2>📺 XEM THÊM VIDEO MỚI</h2>
        <h3>
          <ul>
            <li>
              <a href="https://youtu.be/e3uG3NOH0BU?si=5OKEYa4Mk8sh1sU3" target="_self">🌸 KHONG AI GIEO KHO CHO TA NGOAI CHINH MINH 
              </a>
            </li>
          </ul>
        </h3>
        <h3>
          <ul
            <li>
              <a href="https://www.youtube.com/watch?v=LINK2" target="_blank">🌸 Lời mẹ dạy con theo ánh sáng Phật
              </a>
            </li>
          </ul>
        </h3>
        <h3>
          <ul
            <li>
              <a href="https://www.youtube.com/watch?v=LINK3" target="_blank">🌸 Thiền định buông xả – Giọng đọc trầm ấm
              </a>
            </li>
          </ul>
        </h3>
    </div>
    <section>
      <h2>📺 VIDEO GẦN ĐÂY</h2>
    <div>
      <a href="https://www.youtube.com/watch?v=e3uG3NOH0BU" target="_blank">
        <img src="thumbnail1.jpg" alt="Video 1" style="width: 100%; border-radius: 10px;">
        <h3><p><strong>Minh và Vô Minh trong Khổ Đế</strong></p>
        </h3>
      </a>
    </div>
    <div>
      <a href="#" target="_blank">
        <img src="thumbnail2.jpg" alt="Video 2" style="width: 100%; border-radius: 10px;">
        <h3><p><strong>Hành trình về Đất Phật – Sư Minh Tuệ</strong></p>
        </h3>
      </a>
    </div>
    </section>
    <section>
    <div>
      <a class="button" href="video.html">
      <h2>📺 XEM TẤT CẢ CÁC VIDEO TRÊN KÊNH PHẬT DẠY CON LÀM THEO</h2></a>
        </div>
    </section>
    <section>
      <h2>📝 BÀI VIẾT MỚI NHẤT</h2>
    <div class="article">
      <h3>
        <p><strong>📝 Ai giữ được tâm thanh, người ấy đã bước vào cõi Phật</strong></p>
      </h3>
      <h3>
        <p><strong>
        Có những som mai, ta thức dậy trong yên bình, lòng nhẹ như mây, chẳng bị cuốn vào những vòng xoáy hơn thua. Cũng có những buổi chiều, tiếng chuông chùa ngân xa, vọng vào hồn ta một điều giản dị: Tâm an thì cảnh an.</strong></p>
      </h3>
      <h3>
        <p><strong>
        Trong thế gian này, có biết bao nhiêu điều khiến tâm ta rung động, bất an – từ một lời nói, một ánh nhìn, cho đến những tổn thương cũ kỹ nằm im trong ký ức. Nhưng Đức Phật đã dạy: “Tâm là gốc. Nếu tâm an thì mọi pháp đều an.”</strong></p>
      </h3>
      <h3>
        <p><strong>
        Cõi Phật không phải ở đâu xa. Người nào giữa đời sống đầy biến động mà giữ được nội tâm sáng trong, không khởi sân si, không vọng cầu danh lợi – người ấy đã bước vào cõi Phật giữa nhân gian.</strong></p>
      </h3>
      <h3>
        <p><strong>
        Giữ tâm thanh không dễ, nhưng từng hơi thở chánh niệm, từng hành động tỉnh thức, từng lời nói nhu hòa… đều là bước chân trên con đường trở về với chính mình.</strong></p>
      </h3>
      <h3>
        <p><strong>
        Hãy bắt đầu từ hôm nay, từ giây phút này: Hãy giữ tâm thanh.</strong></p>
      </h3>
    </div>
    </section>
    <section>
      <h2>💬 CHIA SẺ TỪ NGƯỜI XEM</h2>
    <div>
        <h3>🧘‍♀️<p><em><strong>“Mỗi lời đọc như chạm vào tâm. Cảm ơn kênh đã thắp sáng cho con một ngọn đèn trong đêm dài.”</strong></em></p>
        </h3>
        <h3>🌿<p><em><strong>“Không giáo điều, không cao siêu, chỉ là những điều giản dị mà sâu sắc. Cảm ơn vì đã lan tỏa đạo Phật đúng cách.”</strong></em></p>
        </h3>
        <h3>🙏<p><em><strong>“Con thấy lòng mình lặng xuống mỗi lần nghe lời dẫn từ kênh. Nguyện học theo từng bước một.”</strong></em></p>
        </h3>
    </div>
    </section>
    <section>
      <h2>📩KẾT NỐI CÙNG CHÚNG TÔI</h2>
        <h3>
          <p><strong>
        Nếu bạn có điều muốn chia sẻ, có những trăn trở tâm linh chưa tìm được lời giải,<br>
        hoặc đơn giản chỉ là muốn gửi lời chào bình an – hãy kết nối cùng chúng tôi qua:</strong></p>
        </h3>
          <h4>📧 Email:<strong>thanhcao197550@gmail.com</strong>
          </h4>
        <h3>🌐 YouTube: <a href="https://www.youtube.com/@phatdayconlamtheo" target="_blank"><strong>Phật dạy Con làm theo</strong></a>
        </h3>
  </section>
  <hr>
  <footer>
    <h3>
      <p><strong>© 2025 Phật dạy Con làm theo – Tâm lành gieo hạt, lời Phật thắp sáng</strong></p>
    </h3>
    </footer>
    <script src="/widgets/weather-widget.js"></script>
    <script src="/widgets/news-ticker.js"></script>
    
    !NANG CẤP THỜI TIẾT VÀ TIN TỨC
    (function () {
  const quotes = [
    "Tâm bình thế giới bình.",
    "Giữ tâm như nước lặng, soi rõ muôn điều.",
    "Thấy lỗi mình, đừng thấy lỗi người.",
    "Người tu là người buông bỏ, không phải người bỏ cuộc.",
    "Chánh niệm là chìa khóa giải thoát.",
    "Không có con đường dẫn đến hạnh phúc. Hạnh phúc chính là con đường.",
    "Buông bỏ không phải là yếu đuối, mà là dũng khí.",
    "Người biết đủ là người giàu có nhất.",
    "Một niệm thiện có thể hóa giải nghìn niệm ác."
  ];

  const quote = quotes[Math.floor(Math.random() * quotes.length)];

  const box = document.createElement("div");
  box.innerText = `📿 ${quote}`;
  box.style.position = "absolute";
  box.style.bottom = "50px";
  box.style.left = "10px";
  box.style.background = "rgba(255,255,255,0.85)";
  box.style.color = "#222";
  box.style.padding = "8px 12px";
  box.style.borderRadius = "10px";
  box.style.fontSize = "14px";
  box.style.maxWidth = "80%";
  box.style.zIndex = 9;
  box.style.pointerEvents = "none";
  box.style.fontStyle = "italic";

  document.body.appendChild(box);

  if (document.body.classList.contains("dark-mode")) {
    box.style.background = "rgba(0,0,0,0.7)";
    box.style.color = "#eee";
  }
})();

  </body>
</html>
